---
import { getLocale } from "../paraglide/runtime.js";
import { getRelativeLocaleUrl } from "astro:i18n";
---

<!doctype html>
<html lang={getLocale()}>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Paraglide JS Astro Example</title>
	</head>
	<body>
		<script>
			import { defineGetLocale, defineSetLocale, setLocale } from "../paraglide/runtime.js"
			import { getRelativeLocaleUrl } from "astro:i18n";

			defineGetLocale(() => {
				return document.documentElement.lang
			});
			
			defineSetLocale((newLocale) => {
				window.location = getRelativeLocaleUrl(newLocale, window.location.pathname);
			})

			document.querySelector("#switch-locale-en")?.addEventListener('click', () => {
				setLocale("en")
			})

			document.querySelector("#switch-locale-de")?.addEventListener('click', () => {
				setLocale("de")
			})
		</script>
		<div class="row">
			<p>Locale: </p>
			<button id="switch-locale-en">en</button>
			<button id="switch-locale-de">de</button>
		</div>
		<slot />
	</body>
</html>

<style>
  .row {
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
